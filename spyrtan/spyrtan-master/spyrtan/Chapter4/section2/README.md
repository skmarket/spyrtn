# 4-2. コード構造 (分岐・ループ) / 関数と引数

### if / elif / else

さてプログラミングの基本の、

- データ型
- 演算子
- 条件分岐
- ループ

のうち後半の２つをやっていきましょう。<br>
まずは、条件分岐ですね

Python では `if` という構文を利用して条件分岐をすることができます。<br>
比較演算子を用いて

```text
if 条件:
    条件が True のとき実行される処理
```

というようにすることで、ある処理をするかどうか条件分岐させることができます。<br>
ちなみに条件を表現するための比較演算子にはこのようなものがあります

```text
a == b           # a が b と等しい
a != b           # a が b と異なる
a < b            # a が b よりも小さい
a > b            # a が b よりも大きい
a <= b           # a が b 以下である
a >= b           # a が b 以上である
a is b           # a が b と等しい
a is not b       # a が b と異なる
a in b           # a が b に含まれる
a not in b       # a が b に含まれない
```

また、条件が False のときにも処理を実行したい場合には、`else` という構文を利用して

```text
if 条件:
    条件が True のとき実行される処理
else:
    条件が False のとき実行される処理
```

とすることができます。<br>
さらに、複数の条件によって分岐させたい時には、`elif` という他のプログラミング言語では　`else if` に相当する構文を利用することができます。

```text
if 条件:
    条件が True のとき実行される処理
elif 条件2:
    条件2 が True のとき実行される処理
elif 条件3:
    条件3 が True のとき実行される処理
else:
    すべての条件において False のとき実行される処理
```

Python には `switch` や `case` といった構文がありませんが、このように `elif` を利用することによって複数の条件を管理します。<br>
たとえば

- 点数が 100 点以下 80 点以上なら 'A'
- 点数が 60 点以上なら 'B'
- 点数が 60 点未満 0 点以上なら 'C'
- それ以外の値が入力された場合は '入力が不正です'

と表示させるにはどのようなコードを書けばいいか頭で想像してみましょう。<br>
ちなみに Python で文字列を表示させたい場合には、 `print()` の `()` の中に文字列をいれてあげればOKです。<br>
できましたか？

```python
score = 77

if 80 <= score <= 100:
    print('A')
elif score >= 60:
    print('B')
elif score >= 0:
    print('C')
else:
    print('不正な値が入力されました')
```

こんな感じでしょうか。<br>
じつは Python では `score >= 80 and score <= 100` を `80 <= score <= 100` とかけたりするので覚えておくと便利かと思います。

### for / while

さぁプログラミング最後の基本要素であるループについてです。<br>
反復して同じ処理をする時に使うものですね。

Python ではループのときにつかえる構文として `for` と `while` があります。<br>
まずは、`for` からみていきましょう。<br>
`for` はこのあとのセクションで詳しく勉強しますが、たとえば 10 回「こんにちは」と表示したいときには以下のように書きます

```python
for i in range(10):
    print('こんにちは')
```

`in` のあとには一連のデータがきます。<br>
今回の `range(10)` は、0 から 9 までの一連の数字が入ったデータ型です。<br>
（あとでやります。今回はそんなもんかーと思ってください）<br>
つまり正確ではないですが、イメージとしては `in 0, 1, 2, 3, 4, 5, 6, 7, 8 9` という感じです。<br>
そして `for` を利用することによって、左側から順番に１つずつ取り出して `for` のあとの変数 `i` に格納していきます。<br>
なので、順番に `i` には 0, 1, 2, 3 ... と最後の 9 まで整数が入るんですね。<br>
最後の9がはいったら `in` の右側には要素がなくなってしまうので、`for` 文は停止します。

つぎに `while` です。<br>
`while` は以下のような構文を持ちます

```text
while 条件:
    条件が True の時実行される処理
```

条件が True のとき、ループしつづけます。<br>
そして、条件が False になるとループ処理を停止します。これが `while` です。<br>
なので

```python
while True:
    print('こんにちは')
```

とすると、永遠に「こんにちは」と言い続ける地獄のような機械ができあがります。<br>
冗談みたいに見えますが、結果的にこのような無限ループを引き起こすコードを書いてしまうことがあるので使用する際は注意が必要です。

 
### コード構造に関する tips

コード構造（条件分岐・ループ）に関して、いくつか便利な命令がPython で用意されているので紹介します。

- `break` 

ループを強制的に終了させることができる命令です。<br>
0 から 9999 の中から 2020 をみつけたら `print('yeah')` として終了するコードは以下のようにかくことができます。

```python
for year in range(10000):
    if year == 2020:
        print('yeah')
        break
```

ある条件に合致したら、ループ処理を終了したい場合に用いられる命令です

- `continue`

現在のループをスキップします。<br>
0 から 100 までの数字について 3 の倍数を除外して表示しましょう。

```python
for number in range(101):
    if number % 3 == 0:
        continue
    print(number)
```

3 の倍数の `number` では `number % 3 == 0` が True になるので、`continue` が実行され次のループにスキップします。<br>
そのため `print(number)` は実行されないのです。

- `pass`

なにもしないことを明示する命令です。<br>
たとえば、`num_user` が `10000` を超えた場合 `num_user > 10000` についての処理を書こうとしています。<br>
ただ、まだどんな処理をするか考え中なのでとりあえず `if` 文だけを書いておきたい ...<br>
そんなときに使います

```python
num_user = 21394

if num_user > 10000:
    # TODO: [kondo] 処理は遠藤さんと相談してから実装
    pass
```

`break` `continue` `pass` の使い方はバッチリですね。

### 関数の定義方法

突然ですが、なぜ関数は必要なのでしょうか。<br>
こたえは「同じ処理を何回もするから」です。

その他にも

- コードがわかりやすくなる
- 保守性があがる

といった良さがあります。それではこれらの良さを体感すべく関数の定義の方法をみていきます。

```text
def 関数名前(引数)
    処理
    return 返り値
```

といった感じです。<br>
引数は関数に渡すことができる変数です。基本的に関数の中は外界とのつながりはありません。<br>
この引数によって渡された値のみが変数のなかで使用できるのです。

また、`return 返り値`　の返り値のみが外界で受け取ることができる値です。<br>
関数の中は関数の外のコードにとってはブラックボックス化されていると思ってください。<br>
では簡単な関数を作ってみましょう。

```python
def sum_all(a, b, c):
    results = a + b + c
    return results
```

この関数を実行したいときには、この関数の外で関数名である `sum_all` に `()` をつけてあげればOKです<br>
ただし `sum_all()` ではエラーが出てしまいます。そうですね。引数が必要です。<br>
今回は `a, b, c` と３つの引数が用意されているので、それぞれ `1, 2, 3` を渡してあげます。 

```python
def sum_all(a, b, c):
    results = a + b + c
    return results

sum_all(1, 2, 3)
```

こんな感じですね。<br>
ちなみに `a, b, c` は引数として渡す以外の方法はないので、

```python

a = 1
b = 2
c = 3

def sum_all(a, b, c):
    results = a + b + c
    return results

sum_all()
```

としても実行できないことも確かめておきましょう。
また、返り値は `sum_all()` を変数に代入することで取得できます。

```python
def sum_all(a, b, c):
    results = a + b + c
    return results

results = sum_all(1, 2, 3)
print(results) # expected: 6
```

といった感じですね。<br>
関数はブラックボックス化されているといった通り、`print(results)` の `results` は関数内の `results` とは別ものですので注意してください。

では、税抜き価格の果物たちの税込価格を表示するコードを見てみましょう

```python
JAPAN_TAX = 1.1
apple = 200
banana = 100
orange = 150

print("apple の価格は " + str(apple * JAPAN_TAX) + "円(税込み)です")
print("banana の価格は " + str(banana * JAPAN_TAX) + "円(税込み)です")
print("orange の価格は " + str(orange * JAPAN_TAX) + "円(税込み)です")
```

これはどのように改善するのが良さそうでしょうか。<br>
ちなみに注意ポイントとして `+` 演算子は「文字列+整数」という演算を定義していないので、`str()` という整数を文字列に変換する関数を利用して、型を変換しています。<br>
このように型を変換することを「キャストする」と言ったりします。

さて改善方法についてですが、わたしだったらこんな感じかと思います

```python

def price_with_tax(name, price):
    JAPAN_TAX = 1.1
    return f"{name} の価格は {price * JAPAN_TAX}円(税込み)です"

apple = 200
banana = 100
orange = 150

print(price_with_tax('apple', apple))
print(price_with_tax('banana', banana))
print(price_with_tax('orange', orange))
```

ポイントとしては

- `f""` という Python の文字列フォーマット機能
- 関数の名前から処理を推測できるように
- 果物の名前も渡すことで、処理を共通化

といった感じです。これで果物が 100 個に増えようが楽勝ですね！

### さまざまな引数

さて関数の引数ですが、関数に

```python
def func_name(a, b, c):
    pass
```

と指定されている、`a, b, c` を仮引数。<br>
実行されるときに渡される

```python
func_name(1, 2, 3)
```

の `1, 2, 3` を実引数と呼びます。

仮引数は default の値を設定することができて、

```python
def func_name(a='default', b=2, c=False):
    pass
```

とすると、なにも指定せず `func_name()` を実行した場合は default の値が変数に入力されます。<br>
ここで `a` というような default 値のない引数を「位置引数」、`a=1` のような default 値を持つ引数を「キーワード引数」と呼びます。<br>
「キーワード引数は、位置引数のあとにくる」というきまりがあるので注意しておきましょう。

```python
def func_name(a, b, c=False):
    pass
```

はOKですが

```python
def func_name(a=False, b, c):
    pass
```

はNGということですね。

また実引数では、陽に引数を指定することができて

```python
func_name(a=1, b=2, c=3)
```

とします。読んでいて何にどの値が入っているかわかりやすいので、引数が複数ある場合にはこちらの書き方がおすすめです。


さて、このセクションは盛りだくさんでしたね。<br>
quiz.py を解いていきましょう！（進め方は前回の section と同様です。section01 の quiz.md を参照ください！)
